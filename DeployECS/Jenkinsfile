pipeline{
    agent any
    tools {
        "ansibleTower" "CC-AWX-Instance"
    }
    // environment {
    // }
    stages {
        stage('Checkout'){
            steps{
                checkout scm
            }
        }

        stage('Deploy ECS via AWX') {
            ansibleTower(
                towerServer: 'CC-AWX-Instance',
                templateType: 'job',
                jobTemplate: 'Deploy ECS',
                importTowerLogs: true,
                inventory: 'INVENTORIES',
                jobTags: '',
                skipJobTags: '',
                limit: '',
                removeColor: false,
                verbose: true,
                credential: 'cc-aws-crednetials',
                async: false
            )
        }
    }
}